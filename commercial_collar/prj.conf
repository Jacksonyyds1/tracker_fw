CONFIG_SENSOR=y
CONFIG_GPIO=y
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y

CONFIG_ZCBOR=y
CONFIG_ZCBOR_CANONICAL=y

CONFIG_ZBUS=y
CONFIG_ZBUS_RUNTIME_OBSERVERS=y

CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_UART_ASYNC_API=y
CONFIG_UART_NRFX=y
CONFIG_PRINTK=y
CONFIG_MAIN_STACK_SIZE=32768
CONFIG_SHELL_STACK_SIZE=8192
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=8192
CONFIG_POSIX_CLOCK=y

CONFIG_SETTINGS=y
CONFIG_SETTINGS_SHELL=y
CONFIG_SETTINGS_LOG_LEVEL_DBG=y
CONFIG_SETTINGS_RUNTIME=y
CONFIG_SETTINGS_FILE_PATH="/lfs1/settings/run"

CONFIG_PM_DEVICE=y
CONFIG_PM_DEVICE_RUNTIME=y

## SHELL
CONFIG_SHELL=y
CONFIG_LED_SHELL=y
CONFIG_FLASH_SHELL=y
CONFIG_GPIO_SHELL=y
CONFIG_SHELL_WILDCARD=n
CONFIG_SHELL_STACK_SIZE=8192
#CONFIG_LOG_BUFFER_SIZE=8192
#CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=4096
#CONFIG_LOG_PROCESS_THREAD=y
CONFIG_SHELL_CMDS_RESIZE=y
CONFIG_SHELL_CMD_BUFF_SIZE=2048
CONFIG_SHELL_BACKEND_SERIAL_RX_RING_BUFFER_SIZE=2048

## NPM1300
CONFIG_FLASH_SHELL=y
CONFIG_GPIO_SHELL=y


## NPM1300
CONFIG_LED=y
CONFIG_REGULATOR=y
CONFIG_REGULATOR_NPM1300=y
CONFIG_REGULATOR=y
CONFIG_REGULATOR_NPM1300=y
CONFIG_LED_NPM1300=y
CONFIG_GPIO_NPM1300=y
CONFIG_NPM1300_CHARGER=y
CONFIG_NRF_FUEL_GAUGE=y
CONFIG_MFD_NPM1300=y

# Flash
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_SHELL_TEST_COMMANDS=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_MAP_SHELL=y
CONFIG_FLASH_MAP_LABELS=y
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_MPU_ALLOW_FLASH_WRITE=y

# Filesystem
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_FILE_SYSTEM_SHELL=y
CONFIG_FILE_SYSTEM_SHELL_TEST_COMMANDS=y
# use 3MB of external flash for file system (other 1MB is for DFU slot)
CONFIG_PM_PARTITION_SIZE_LITTLEFS=0x300000
CONFIG_PM_PARTITION_REGION_LITTLEFS_EXTERNAL=y

CONFIG_SPI=n

CONFIG_NRFX_SPIM4=y

## watchdog
CONFIG_WDT_LOG_LEVEL_DBG=y
CONFIG_WATCHDOG=y
CONFIG_WDT_NPM1300=y
#CONFIG_WDT_NPM1300_TIMEOUT_IN_MS=60000
CONFIG_COUNTER=y

#CONFIG_USE_UART_TO_NRF9160=y

# IMU
CONFIG_LSM6DSV16X_D1=y
CONFIG_LSM6DSV16X_D1_TRIGGER_OWN_THREAD=y
CONFIG_LSM6DSV16X_D1_THREAD_STACK_SIZE=4096
CONFIG_LSM6DSV16X_D1_ENABLE_MOTION=y

CONFIG_CJSON_LIB=y

## Bringup and Mfg test
## might require hardware mods, do not use unless you know what you are doing
#CONFIG_ENABLE_RFFE_TO_QM13335TR13=y

CONFIG_WIFI_SPI_LOG_LEVEL_ERR=y

# BLE
CONFIG_BT=y
CONFIG_BT_SMP=y # required for .security_changed callback
CONFIG_BT_SIGNING=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_BAS=y
CONFIG_BT_DEVICE_NAME_DYNAMIC=y
CONFIG_BT_RX_STACK_SIZE=4096
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_ATT_PREPARE_COUNT=2
CONFIG_BT_CONN_TX_MAX=10
CONFIG_BT_L2CAP_TX_BUF_COUNT=10
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_L2CAP_DYNAMIC_CHANNEL=y
CONFIG_BT_KEYS_OVERWRITE_OLDEST=y
CONFIG_BT_SETTINGS=y
CONFIG_BT_SHELL=y
CONFIG_BT_MAX_PAIRED=10
# 4s supervisory timeout, max recommended if iOS
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# tweak some BT configs
CONFIG_BT_ATT_ENFORCE_FLOW=n
CONFIG_BT_ATT_PREPARE_COUNT=10
CONFIG_BT_GATT_AUTO_SEC_REQ=n
CONFIG_BT_GATT_CACHING=n
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# MCUBoot
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_MCUBOOT_GENERATE_UNSIGNED_IMAGE=y
CONFIG_MCUBOOT_GENERATE_CONFIRMED_IMAGE=y

# NOTE: we put DFU secondary slot in QSPI flash to save code space for app
CONFIG_PM_EXTERNAL_FLASH_MCUBOOT_SECONDARY=y
CONFIG_ADD_MCUBOOT_MEDIATE_SIM_FLASH_DTS=n

# DFU - this enables all required SMP handlers and SMP BT reassembly feature
CONFIG_NCS_SAMPLE_MCUMGR_BT_OTA_DFU=y
# LFS access - this allows us to download files from the device manager app
CONFIG_MCUMGR_GRP_FS=y
CONFIG_MCUMGR_GRP_FS_MAX_FILE_SIZE_4GB=y

# Network core upgrades
CONFIG_NRF53_UPGRADE_NETWORK_CORE=y
CONFIG_DFU_MULTI_IMAGE_PACKAGE_BUILD=y
CONFIG_DFU_MULTI_IMAGE_PACKAGE_NET=y

# enable c++ support for ML library
CONFIG_CPLUSPLUS=y
CONFIG_LIB_CPLUSPLUS=y

#FIXME: enabling this breaks '#include <cJSON.h>', need to figure this out
#CONFIG_NEWLIB_LIBC=y
CONFIG_FPU=y

# used to generate Nonce
CONFIG_ENTROPY_GENERATOR=y
CONFIG_ENTROPY_DEVICE_RANDOM_GENERATOR=y

CONFIG_BT_HCI_CORE_LOG_LEVEL_ERR=y
CONFIG_FS_LOG_LEVEL_OFF=y


CONFIG_BASE64=y
CONFIG_ENTROPY_DEVICE_RANDOM_GENERATOR=y
CONFIG_LOG_TIMESTAMP_64BIT=y
CONFIG_MCUMGR_TRANSPORT_WORKQUEUE_STACK_SIZE=5120

# this seems like a ridiculously large value, got me past the CJson issue, need to reduce to something reasonable
CONFIG_HEAP_MEM_POOL_SIZE=49152

CONFIG_MQTT_KEEPALIVE=600

CONFIG_ENABLE_FOTA_ON_USB_CONNECTION=1

###############       DEBUG STUFF - TURN OFF FOR PRODUCTION/DEMO       #####################
# Changes to the CONFIG values that are local and not checked in can now be stored in prj.local.conf
# This file will not be checked in but will be merged into the main prj.conf at make ime
